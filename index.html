<!DOCTYPE html>
<html>

<head>
	<title>Hypeman</title>
	<!-- BOOTSTRAP -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<!-- FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Fugaz+One&display=swap" rel="stylesheet">
	<!-- CUSTOM -->
	<link rel="stylesheet" type="text/css" href="css/stylesheet.css">

</head>

<body>
	<button id="hype-boost-button" class="btn anim-swoosh-right text-center shadow-sm" data-toggle="modal"
		data-target="#hype-modal">
		<img src="css/img/hype.png" width="auto" height="64px">
	</button>
	<div id="header-container" class="container-fluid text-left">
		<div id="header-row" class="row">
			<div class="col-2 mr-auto my-2">
				<h1 id="title" class="anim-swoosh-left">
					<!-- LOGO HERE -->
					<img src="css/img/logo2.png" width="auto" height="42px">
				</h1>
			</div>
			<div id="right-third" class="col-2 ml-auto">
				<div class="container-fluid text-center">
					<div class="row">
						<div id="profile-card" class="col-11 anim-swoosh-right-slow shadow-sm">
							<div id="profile-picture-div" class="mx-auto my-4"></div>
							<div id="profile-elements">
								<h4>Demoman</h4>
								<p>7 asks ðŸ¤” <span id="hype-count">125</span> Hypes ðŸ”¥</p>
								<h5 class="my-3 mt-5"><a href="">My Asks</a></h5>
								<h5 class="my-3"><a href="">Network</a></h5>
								<h5 class="mt-3 mb-5"><a href="">Search</a></h5>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="header-spacer"></div>
	<div id="body-container" class="container-fluid text-left">
		<div class="row mt-5">
			<div class="col-2 ml-1 mr-5 anim-swoosh-left-slow">
				<h5 class="ml-2">This week's hypest</h5>
				<ul class="list-group shadow-sm">
					<li class="list-group-item">GoldenFlatfish
						<span class="ml-1 badge badge-danger">7839</span>
					</li>
					<li class="list-group-item">CadetblueKawala
						<span class="ml-1 badge badge-warning">6927</span>
					</li>
					<li class="list-group-item">AwesomeSandpiper
						<span class="ml-1 badge badge-warning">4908</span>
					</li>
					<li class="list-group-item">SlushyFlatcoatretriever
						<span class="ml-1 badge badge-primary">3000</span>
					</li>
					<li class="list-group-item">WeirdAsiaticmouflon
						<span class="ml-1 badge badge-primary">980</span>
					</li>
					<li class="list-group-item">SurefootedKusimanse
						<span class="ml-1 badge badge-primary">780</span>
					</li>
					<li class="list-group-item">EarlyShrike
						<span class="ml-1 badge badge-primary">666</span>
					</li>
					<li class="list-group-item">ImpoliteButterfly
						<span class="ml-1 badge badge-light">345</span>
					</li>
					<li class="list-group-item">SwiftUnau
						<span class="ml-1 badge badge-light">145</span>
					</li>
					<li class="list-group-item">SecondBittern
						<span class="ml-1 badge badge-light">79</span>
					</li>
				</ul>
			</div>
			<div class="col-6 mx-auto">
				<div id="make-post" class="container-fluid mb-3 shadow-sm text-left anim-swoosh-down">
					<div class="input-group mb-auto">
						<textarea id="post-text" class="mt-3 form-control" rows="3" placeholder="What's on your mind?" required></textarea>
					</div>
					<div class="btn-group btn-group-toggle my-1 mb-3" data-toggle="buttons">
						<label class="btn btn-secondary active">
							<input type="radio" name="options" id="option1" checked> Hype Request
						</label>
						<label class="btn btn-secondary">
							<input type="radio" name="options" id="option3"> Advice Request
						</label>
					</div>
					<div class="mb-5">
						<span class="font-weight-light pr-3">Tags:</span>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="red">
							<label class="form-check-label" for="inlineCheckbox1"><span class="badge badge-danger">HYPE EMERGENCY</span></label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="yellow">
							<label class="form-check-label" for="inlineCheckbox2"><span class="badge badge-warning">LOW ON HYPE</span></label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="green" >
							<label class="form-check-label" for="inlineCheckbox3"><span class="badge badge-success">POSITIVE ENERGY</span> </label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox" id="inlineCheckbox4" value="green2">
							<label class="form-check-label" for="inlineCheckbox4"><span class="badge badge-success">LET'S GET THIS BREAD</span> </label>
						</div>
					</div>
					<div class="text-right mb-3">
						<button type="button" id="submit-form-btn" class="ml-auto btn btn-primary btn-sm mb-3">Submit Post</button>
					</div>
				</div>
				<div id="post-container" class="anim-swoosh-down-slow">
				<!-- POST CONTAINER -->
				</div>
			</div>
			<div class="col-1 mr-auto"></div>
		</div>
	</div>

	<!-- Hype Modal -->
	<div class="modal fade" id="hype-modal" tabindex="-1" role="dialog" aria-labelledby="hype-modal" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title" id="exampleModalLongTitle">HYPE BOOST ACTIVE</h3>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h3>Recipient: <b>Demoman</b></h3>
					<canvas id="meter" width="600" height="50"></canvas>
					<div>
						<h4>Hype Acquired: <span id="boost-val">0</span></h4>
					</div>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-success" data-dismiss="modal">Submit Hype</button>
				</div>
			</div>
		</div>
	</div>




	<!-- JQUERY -->
	<script src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous">
	</script>
	<!-- BOOTSTRAP -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
	</script>
	<!-- CUSTOM -->
	<script type="text/javascript" src="js/volume-meter.js"></script>
	<script type="text/javascript" src="js/main.js"></script>


	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-app.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
		 https://firebase.google.com/docs/web/setup#available-libraries -->
	<script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-database.js"></script>
	<!-- <script src="render.js"></script> -->

	<script>
		// Your web app's Firebase configuration
		var firebaseConfig = {
			apiKey: "AIzaSyB4IG6DOJJHWoD4H50Pibt2fMU7fcdWuTo",
			authDomain: "hypeman-nw2020.firebaseapp.com",
			databaseURL: "https://hypeman-nw2020.firebaseio.com",
			projectId: "hypeman-nw2020",
			storageBucket: "hypeman-nw2020.appspot.com",
			messagingSenderId: "342502727786",
			appId: "1:342502727786:web:0d2756e8455b53d9f82a13"
		};
		// Initialize Firebase
		firebase.initializeApp(firebaseConfig);

		//Get reference to database
		var dbItemsRef = firebase.database().ref().child("posts");

		dbItemsRef.on(
			"value",
			function (snap) {
				console.log("Get posts successful!");
				console.log(snap.val());

				const myNode = document.getElementById("post-container");
					while (myNode.firstChild) {
						myNode.removeChild(myNode.firstChild);
					}
				
				for (let key in snap.val()) {
					console.log(key, snap.val()[key]);
					let post = snap.val()[key];
					var container = $(`
				<!-- POST ============================== -->
				<div class="container-fluid mb-3 ask-post shadow-sm text-left anim-jelly">
					<div class="row">
						<div class="col-12">
							<div id="reponse-container-` + key + `" class="container-fluid">
								<div class="post-main row speech-bubble-left mt-3 shadow-sm">
									<div class="col-12 mt-3">
										<h2 class="">
											<img class="post-picture-div" class="mx-auto my-4"></img>
											<span id="user-says" class="font-weight-bold">` + post.username + ` says: </span>
										</h2>
										<p class="ml-5 font-italic font-weight-light">` + post.ask + `</p>
									</div>
									<div class="mx-3 my-3">
										<button type="button" class="hype-btn btn btn-primary">
  											SEND HYPE ðŸ”¥ <span class="badge badge-light">7</span>
										</button>
									</div>
								</div>
								<div class="row mt-3">
									<div class="col-1">
										<span class="font-weight-bold">Tags: </span>
									</div>
									<div class="col-9 mr-auto">
										<span class="badge badge-danger">HYPE EMERGENCY</span>
										<span class="badge badge-warning">LOW ON HYPE</span>
										<span class="badge badge-success">POSITIVE ENERGY</span>
										<span class="badge badge-success">LET'S GET THIS BREAD</span>
									</div>
								</div>
								<div class="row">
									<div class="col-3 py-3 my-3 ml-auto">	
									</div>
									<div class="col-6 post-response py-3 my-3 speech-bubble-right">
										<div class="mb-2">
											<span>This is a response.</span>
										</div>
										<button type="button" class="hype-btn btn btn-primary">
  											 ðŸ”¥ 
										</button>
										<button type="button" class="downhype-btn btn btn-primary">
  											 ðŸ¤®
										</button>
										<span class="ml-1 badge badge-light">7</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row my-2">
						<div class="col-6 mx-auto mb-3 mt-4 text-center">
							<div class="mb-3">
								<textarea id="response-text" class="mt-3 form-control" rows="2" placeholder="Enter your message..." required></textarea>
							</div>
							<button type="button" class="btn btn-primary font-weight-bold">+ SEND RESPONSE</button>
						</div>
					</div>
				</div>
				<!-- POST ============================= -->`);
					if (post.responses != null) {
						post.responses.forEach(element => {
							if (element.type == "text") {
								let responseContainer = $(`<div class="row">
									<div class="col-3 py-3 my-3 ml-auto">	
									</div>
									<div class="col-6 post-response py-3 my-3 speech-bubble-right">
										<div class="mb-2">
											<span>` + element.val + `</span>
										</div>
										<button type="button" class="hype-btn btn btn-primary">
  											 ðŸ”¥ 
										</button>
										<button type="button" class="downhype-btn btn btn-primary">
  											 ðŸ¤®
										</button>
										<span class="ml-1 badge badge-light">` + element.hypescore + `</span>
									</div>
								</div>`);
								$("#reponse-container-" + key).append(responseContainer);
							} else if (element.type == "video") {
								let responseContainer = $(`<div class="row">
									<div class="col-3 py-3 my-3 ml-auto">	
									</div>
									<div class="col-6 post-response py-3 my-3 speech-bubble-right">
										<div class="mb-2">
											<span>` + element.val + `</span>
										</div>
										<button type="button" class="hype-btn btn btn-primary">
  											 ðŸ”¥ 
										</button>
										<button type="button" class="downhype-btn btn btn-primary">
  											 ðŸ¤®
										</button>
										<span class="ml-1 badge badge-light">` + element.hypescore + `</span>
									</div>
								</div>`);
								$("#reponse-container-" + post.id).append(responseContainer);
							}
						});
						
					}
					$("#post-container").append(container);
				}
				
			});
	</script>
</body>

</html>